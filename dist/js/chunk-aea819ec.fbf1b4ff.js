(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aea819ec"],{3526:function(e,t,a){},"5c05":function(e,t,a){"use strict";var r=a("3526"),s=a.n(r);s.a},"986e":function(e,t,a){"use strict";var r=a("2b0e");t["a"]=new r["default"]},ee7f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("my-bread",[e._v("个人设置")])],1),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"编号: "}},[e._v(e._s(e.id))]),a("el-form-item",{attrs:{label:"手机号: "}},[e._v(e._s(e.mobile))]),a("el-form-item",{attrs:{label:"媒体名称: "}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"媒体介绍: "}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:3},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),a("el-form-item",{attrs:{label:"邮箱: "}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存设置")])],1)],1),a("div",{staticClass:"img"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.handleAvatarSuccess,"show-file-list":!1}},[e.photo?a("img",{staticClass:"avatar",attrs:{src:e.photo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("p",[e._v("修改头像")])],1)],1)],1)},s=[],n=(a("b0c0"),a("96cf"),a("1da1")),o=a("986e"),i=a("25a9"),c={name:"per",data:function(){return{form:{name:"",intro:"",email:""},id:"",mobile:"",photo:""}},created:function(){this.getData()},methods:{getData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("user/profile");case 3:a=t.sent,r=a.data.data,e.id=r.id,e.mobile=r.mobile,e.form.name=r.name,e.form.intro=r.intro,e.form.email=r.email,e.photo=r.photo,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.$message.error("获取信息失败");case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},onSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.patch("user/profile",e.form);case 3:a=t.sent,r=a.data.data,e.$message.success("修改信息成功"),o["a"].$emit("eventFormA",r.name),s=i["a"].getUser(),s.name=r.name,i["a"].setUser(s),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),t.t0.response&&409===t.t0.response.status?e.$message.error("用户名已存在"):e.$message.error("修改信息失败");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},handleAvatarSuccess:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,n,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.file,s=new FormData,s.append("photo",r),a.prev=3,a.next=6,t.$http.patch("user/photo",s);case 6:n=a.sent,c=n.data.data,t.$message.success("上传成功"),t.photo=c.photo,o["a"].$emit("upPhoto",c.photo),l=i["a"].getUser(),l.photo=c.photo,i["a"].setUser(l),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](3),t.$message.error("上传失败");case 19:case"end":return a.stop()}}),a,null,[[3,16]])})))()}}},l=c,m=(a("5c05"),a("2877")),u=Object(m["a"])(l,r,s,!1,null,"2b5cd1fb",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-aea819ec.fbf1b4ff.js.map