(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11b9"],{4546:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("my-bread",[t._v("评论管理")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"title",label:"文章标题"}}),a("el-table-column",{attrs:{prop:"total_comment_count",label:"总评论数"}}),a("el-table-column",{attrs:{prop:"fans_comment_count",label:"粉丝评论数"}}),a("el-table-column",{attrs:{label:"评论状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.comment_status?"正常":"关闭"))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.comment_status?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.toggleStatus(e.row)}}},[t._v("关闭评论")]):a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return t.toggleStatus(e.row)}}},[t._v("打开评论")])]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.count,"page-size":t.reqParams.per_page,"current-page":t.reqParams.page},on:{"current-change":t.changePage}})],1)],1)},r=[],s=(a("96cf"),a("1da1")),c={name:"my-comment",data:function(){return{reqParams:{page:1,per_page:20,response_type:"comment"},tableData:[],count:0}},created:function(){this.getData()},methods:{toggleStatus:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$http.put("comments/status?article_id=".concat(t.id),{allow_comment:!t.comment_status});case 3:n=a.sent,r=n.data.data,e.$message.success(r.allow_comment?"打开评论成功":"关闭评论成功"),t.comment_status=r.allow_comment,a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),e.$message.error("操作失败");case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},changePage:function(t){this.reqParams.page=t,this.getData()},getData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("articles",{params:t.reqParams});case 3:a=e.sent,n=a.data.data,t.tableData=n.results,t.count=n.total_count,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}},o=c,l=a("2877"),u=Object(l["a"])(o,n,r,!1,null,"5731a9a8",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0c11b9.5b05487a.js.map